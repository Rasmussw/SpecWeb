import { Injectable } from '@angular/core';
import { LogLevel } from './log-level';
import * as i0 from "@angular/core";
import * as i1 from "./abstract-logger.service";
class LoggerService {
    constructor(abstractLoggerService) {
        this.abstractLoggerService = abstractLoggerService;
    }
    logError(configuration, message, ...args) {
        if (this.loggingIsTurnedOff(configuration)) {
            return;
        }
        const { configId } = configuration;
        const messageToLog = this.isObject(message)
            ? JSON.stringify(message)
            : message;
        if (!!args && !!args.length) {
            this.abstractLoggerService.logError(`[ERROR] ${configId} - ${messageToLog}`, ...args);
        }
        else {
            this.abstractLoggerService.logError(`[ERROR] ${configId} - ${messageToLog}`);
        }
    }
    logWarning(configuration, message, ...args) {
        if (!this.logLevelIsSet(configuration)) {
            return;
        }
        if (this.loggingIsTurnedOff(configuration)) {
            return;
        }
        if (!this.currentLogLevelIsEqualOrSmallerThan(configuration, LogLevel.Warn)) {
            return;
        }
        const { configId } = configuration;
        const messageToLog = this.isObject(message)
            ? JSON.stringify(message)
            : message;
        if (!!args && !!args.length) {
            this.abstractLoggerService.logWarning(`[WARN] ${configId} - ${messageToLog}`, ...args);
        }
        else {
            this.abstractLoggerService.logWarning(`[WARN] ${configId} - ${messageToLog}`);
        }
    }
    logDebug(configuration, message, ...args) {
        if (!this.logLevelIsSet(configuration)) {
            return;
        }
        if (this.loggingIsTurnedOff(configuration)) {
            return;
        }
        if (!this.currentLogLevelIsEqualOrSmallerThan(configuration, LogLevel.Debug)) {
            return;
        }
        const { configId } = configuration;
        const messageToLog = this.isObject(message)
            ? JSON.stringify(message)
            : message;
        if (!!args && !!args.length) {
            this.abstractLoggerService.logDebug(`[DEBUG] ${configId} - ${messageToLog}`, ...args);
        }
        else {
            this.abstractLoggerService.logDebug(`[DEBUG] ${configId} - ${messageToLog}`);
        }
    }
    currentLogLevelIsEqualOrSmallerThan(configuration, logLevelToCompare) {
        const { logLevel } = configuration || {};
        return logLevel <= logLevelToCompare;
    }
    logLevelIsSet(configuration) {
        const { logLevel } = configuration || {};
        if (logLevel === null) {
            return false;
        }
        return logLevel !== undefined;
    }
    loggingIsTurnedOff(configuration) {
        const { logLevel } = configuration || {};
        return logLevel === LogLevel.None;
    }
    isObject(possibleObject) {
        return Object.prototype.toString.call(possibleObject) === '[object Object]';
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.0.2", ngImport: i0, type: LoggerService, deps: [{ token: i1.AbstractLoggerService }], target: i0.ɵɵFactoryTarget.Injectable }); }
    static { this.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "16.0.2", ngImport: i0, type: LoggerService, providedIn: 'root' }); }
}
export { LoggerService };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.0.2", ngImport: i0, type: LoggerService, decorators: [{
            type: Injectable,
            args: [{ providedIn: 'root' }]
        }], ctorParameters: function () { return [{ type: i1.AbstractLoggerService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9nZ2VyLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9hbmd1bGFyLWF1dGgtb2lkYy1jbGllbnQvc3JjL2xpYi9sb2dnaW5nL2xvZ2dlci5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFHM0MsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGFBQWEsQ0FBQzs7O0FBRXZDLE1BQ2EsYUFBYTtJQUN4QixZQUE2QixxQkFBNEM7UUFBNUMsMEJBQXFCLEdBQXJCLHFCQUFxQixDQUF1QjtJQUFHLENBQUM7SUFFN0UsUUFBUSxDQUNOLGFBQWtDLEVBQ2xDLE9BQVksRUFDWixHQUFHLElBQVc7UUFFZCxJQUFJLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxhQUFhLENBQUMsRUFBRTtZQUMxQyxPQUFPO1NBQ1I7UUFFRCxNQUFNLEVBQUUsUUFBUSxFQUFFLEdBQUcsYUFBYSxDQUFDO1FBQ25DLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDO1lBQ3pDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQztZQUN6QixDQUFDLENBQUMsT0FBTyxDQUFDO1FBRVosSUFBSSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQzNCLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxRQUFRLENBQ2pDLFdBQVcsUUFBUSxNQUFNLFlBQVksRUFBRSxFQUN2QyxHQUFHLElBQUksQ0FDUixDQUFDO1NBQ0g7YUFBTTtZQUNMLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxRQUFRLENBQ2pDLFdBQVcsUUFBUSxNQUFNLFlBQVksRUFBRSxDQUN4QyxDQUFDO1NBQ0g7SUFDSCxDQUFDO0lBRUQsVUFBVSxDQUNSLGFBQWtDLEVBQ2xDLE9BQVksRUFDWixHQUFH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LElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxpQkFBaUIsQ0FBQztJQUM5RSxDQUFDOzhHQWhJVSxhQUFhO2tIQUFiLGFBQWEsY0FEQSxNQUFNOztTQUNuQixhQUFhOzJGQUFiLGFBQWE7a0JBRHpCLFVBQVU7bUJBQUMsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBPcGVuSWRDb25maWd1cmF0aW9uIH0gZnJvbSAnLi4vY29uZmlnL29wZW5pZC1jb25maWd1cmF0aW9uJztcclxuaW1wb3J0IHsgQWJzdHJhY3RMb2dnZXJTZXJ2aWNlIH0gZnJvbSAnLi9hYnN0cmFjdC1sb2dnZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IExvZ0xldmVsIH0gZnJvbSAnLi9sb2ctbGV2ZWwnO1xyXG5cclxuQEluamVjdGFibGUoeyBwcm92aWRlZEluOiAncm9vdCcgfSlcclxuZXhwb3J0IGNsYXNzIExvZ2dlclNlcnZpY2Uge1xyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgYWJzdHJhY3RMb2dnZXJTZXJ2aWNlOiBBYnN0cmFjdExvZ2dlclNlcnZpY2UpIHt9XHJcblxyXG4gIGxvZ0Vycm9yKFxyXG4gICAgY29uZmlndXJhdGlvbjogT3BlbklkQ29uZmlndXJhdGlvbixcclxuICAgIG1lc3NhZ2U6IGFueSxcclxuICAgIC4uLmFyZ3M6IGFueVtdXHJcbiAgKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5sb2dnaW5nSXNUdXJuZWRPZmYoY29uZmlndXJhdGlvbikpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgY29uZmlnSWQgfSA9IGNvbmZpZ3VyYXRpb247XHJcbiAgICBjb25zdCBtZXNzYWdlVG9Mb2cgPSB0aGlzLmlzT2JqZWN0KG1lc3NhZ2UpXHJcbiAgICAgID8gSlNPTi5zdHJpbmdpZnkobWVzc2FnZSlcclxuICAgICAgOiBtZXNzYWdlO1xyXG5cclxuICAgIGlmICghIWFyZ3MgJiYgISFhcmdzLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLmFic3RyYWN0TG9nZ2VyU2VydmljZS5sb2dFcnJvcihcclxuICAgICAgICBgW0VSUk9SXSAke2NvbmZpZ0lkfSAtICR7bWVzc2FnZVRvTG9nfWAsXHJcbiAgICAgICAgLi4uYXJnc1xyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5hYnN0cmFjdExvZ2dlclNlcnZpY2UubG9nRXJyb3IoXHJcbiAgICAgICAgYFtFUlJPUl0gJHtjb25maWdJZH0gLSAke21lc3NhZ2VUb0xvZ31gXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBsb2dXYXJuaW5nKFxyXG4gICAgY29uZmlndXJhdGlvbjogT3BlbklkQ29uZmlndXJhdGlvbixcclxuICAgIG1lc3NhZ2U6IGFueSxcclxuICAgIC4uLmFyZ3M6IGFueVtdXHJcbiAgKTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMubG9nTGV2ZWxJc1NldChjb25maWd1cmF0aW9uKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMubG9nZ2luZ0lzVHVybmVkT2ZmKGNvbmZpZ3VyYXRpb24pKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoXHJcbiAgICAgICF0aGlzLmN1cnJlbnRMb2dMZXZlbElzRXF1YWxPclNtYWxsZXJUaGFuKGNvbmZpZ3VyYXRpb24sIExvZ0xldmVsLldhcm4pXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgY29uZmlnSWQgfSA9IGNvbmZpZ3VyYXRpb247XHJcbiAgICBjb25zdCBtZXNzYWdlVG9Mb2cgPSB0aGlzLmlzT2JqZWN0KG1lc3NhZ2UpXHJcbiAgICAgID8gSlNPTi5zdHJpbmdpZnkobWVzc2FnZSlcclxuICAgICAgOiBtZXNzYWdlO1xyXG5cclxuICAgIGlmICghIWFyZ3MgJiYgISFhcmdzLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLmFic3RyYWN0TG9nZ2VyU2VydmljZS5sb2dXYXJuaW5nKFxyXG4gICAgICAgIGBbV0FSTl0gJHtjb25maWdJZH0gLSAke21lc3NhZ2VUb0xvZ31gLFxyXG4gICAgICAgIC4uLmFyZ3NcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuYWJzdHJhY3RMb2dnZXJTZXJ2aWNlLmxvZ1dhcm5pbmcoXHJcbiAgICAgICAgYFtXQVJOXSAke2NvbmZpZ0lkfSAtICR7bWVzc2FnZVRvTG9nfWBcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGxvZ0RlYnVnKFxyXG4gICAgY29uZmlndXJhdGlvbjogT3BlbklkQ29uZmlndXJhdGlvbixcclxuICAgIG1lc3NhZ2U6IGFueSxcclxuICAgIC4uLmFyZ3M6IGFueVtdXHJcbiAgKTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMubG9nTGV2ZWxJc1NldChjb25maWd1cmF0aW9uKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMubG9nZ2luZ0lzVHVybmVkT2ZmKGNvbmZpZ3VyYXRpb24pKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoXHJcbiAgICAgICF0aGlzLmN1cnJlbnRMb2dMZXZlbElzRXF1YWxPclNtYWxsZXJUaGFuKGNvbmZpZ3VyYXRpb24sIExvZ0xldmVsLkRlYnVnKVxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGNvbmZpZ0lkIH0gPSBjb25maWd1cmF0aW9uO1xyXG4gICAgY29uc3QgbWVzc2FnZVRvTG9nID0gdGhpcy5pc09iamVjdChtZXNzYWdlKVxyXG4gICAgICA/IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpXHJcbiAgICAgIDogbWVzc2FnZTtcclxuXHJcbiAgICBpZiAoISFhcmdzICYmICEhYXJncy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5hYnN0cmFjdExvZ2dlclNlcnZpY2UubG9nRGVidWcoXHJcbiAgICAgICAgYFtERUJVR10gJHtjb25maWdJZH0gLSAke21lc3NhZ2VUb0xvZ31gLFxyXG4gICAgICAgIC4uLmFyZ3NcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuYWJzdHJhY3RMb2dnZXJTZXJ2aWNlLmxvZ0RlYnVnKFxyXG4gICAgICAgIGBbREVCVUddICR7Y29uZmlnSWR9IC0gJHttZXNzYWdlVG9Mb2d9YFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjdXJyZW50TG9nTGV2ZWxJc0VxdWFsT3JTbWFsbGVyVGhhbihcclxuICAgIGNvbmZpZ3VyYXRpb246IE9wZW5JZENvbmZpZ3VyYXRpb24sXHJcbiAgICBsb2dMZXZlbFRvQ29tcGFyZTogTG9nTGV2ZWxcclxuICApOiBib29sZWFuIHtcclxuICAgIGNvbnN0IHsgbG9nTGV2ZWwgfSA9IGNvbmZpZ3VyYXRpb24gfHwge307XHJcblxyXG4gICAgcmV0dXJuIGxvZ0xldmVsIDw9IGxvZ0xldmVsVG9Db21wYXJlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBsb2dMZXZlbElzU2V0KGNvbmZpZ3VyYXRpb246IE9wZW5JZENvbmZpZ3VyYXRpb24pOiBib29sZWFuIHtcclxuICAgIGNvbnN0IHsgbG9nTGV2ZWwgfSA9IGNvbmZpZ3VyYXRpb24gfHwge307XHJcblxyXG4gICAgaWYgKGxvZ0xldmVsID09PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbG9nTGV2ZWwgIT09IHVuZGVmaW5lZDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbG9nZ2luZ0lzVHVybmVkT2ZmKGNvbmZpZ3VyYXRpb246IE9wZW5JZENvbmZpZ3VyYXRpb24pOiBib29sZWFuIHtcclxuICAgIGNvbnN0IHsgbG9nTGV2ZWwgfSA9IGNvbmZpZ3VyYXRpb24gfHwge307XHJcblxyXG4gICAgcmV0dXJuIGxvZ0xldmVsID09PSBMb2dMZXZlbC5Ob25lO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpc09iamVjdChwb3NzaWJsZU9iamVjdDogYW55KTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHBvc3NpYmxlT2JqZWN0KSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XHJcbiAgfVxyXG59XHJcbiJdfQ==